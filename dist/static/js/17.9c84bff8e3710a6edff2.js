webpackJsonp([17],{"3EE6":function(t,e){},ZzOL:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("//Fk"),o=s.n(a),n=s("Xxa5"),i=s.n(n),r=s("exGp"),c=s.n(r),l=s("smLj"),m={name:"Cmd",data:function(){return{audio:{src:"",el:null,volume:50},cmdPrefix:"~ root# ",shown:!1,currentCommand:"",allCommands:["help","go","clear","reload","audio","speak"],hiddenCommands:["ajax"],consoleStyles:{color:{label:"rgb(79, 192, 141)",normal:"#cccccc",success:"#19be6b",warning:"#ff9900",error:"#ed4014"}},allRoutePath:[],historyConsoles:[],historyCommands:[],activeHistoryIndex:-1}},mounted:function(){var t=this;window.onkeydown=function(e){if((e.metaKey||e.ctrlKey)&&e.shiftKey&&82===e.keyCode)return t.toggleCmdContainer(),e.preventDefault(),!1},this.audio.el=document.getElementById("cmd_audio"),this.allRoutePath=this.getAllRoutePath(),this.historyConsoles.push({type:"user",text:'<span style="color: '+this.consoleStyles.color.label+';">'+this.cmdPrefix+"</span> help"}),this.commandHelp()},methods:{toggleCmdContainer:function(){this.shown=!this.shown},keyupHandler:function(t){38===t.keyCode?(this.activeHistoryIndex=(this.activeHistoryIndex-1+this.historyCommands.length)%this.historyCommands.length,this.currentCommand=this.historyCommands[this.activeHistoryIndex]):40===t.keyCode&&(this.activeHistoryIndex=(this.activeHistoryIndex+1)%this.historyCommands.length,this.currentCommand=this.historyCommands[this.activeHistoryIndex])},sendCommand:function(){var t=this;return c()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.currentCommand&&t.currentCommand.trim()){e.next=2;break}return e.abrupt("return");case 2:return t.historyConsoles.push({type:"user",text:'<span style="color: '+t.consoleStyles.color.label+';">'+t.cmdPrefix+"</span> "+t.currentCommand}),e.next=5,t.dealWithCommand(t.currentCommand.trim());case 5:t.historyCommands[t.historyCommands.length-1]!==t.currentCommand.trim()&&(t.historyCommands.push(t.currentCommand.trim()),t.activeHistoryIndex=t.historyCommands.length),t.currentCommand="",t.scrollToConsoleBottom();case 8:case"end":return e.stop()}},e,t)}))()},autoReply:function(t){var e="normal";t.status&&this.consoleStyles.color.hasOwnProperty(t.status)&&(e=t.status),this.historyConsoles.push({type:"reply",text:'<span style="color: '+this.consoleStyles.color[e]+';">'+t.text+"</span>"})},getCommandName:function(t){return t.split(" ")[0]},getCommandArgs:function(t){var e=t.split(" ");return e.shift(),e},getAllRoutePath:function(){var t=[];l.a.hasOwnProperty("name")&&t.push(l.a.name);for(var e=0;e<l.a.children.length;e++)l.a.children[e].hasOwnProperty("name")&&t.indexOf(l.a.children[e].name)<0&&t.push(l.a.children[e].name);return t},dealWithCommand:function(t){var e=this;return new o.a(function(s){var a=e.getCommandName(t);e.allCommands.indexOf(a)<0&&e.hiddenCommands.indexOf(a)<0&&(e.autoReply({status:"error",text:"命令 <b>"+a+'</b> 不存在<br/><span style="color: #cccccc;">输入 help 查看帮助</span>'}),s(!0));var o=e.getCommandArgs(t);switch(a){case"clear":e.clearConsole();break;case"go":e.commandGo({args:o});break;case"help":e.commandHelp();break;case"reload":e.commandReload();break;case"audio":e.commandAudio({args:o});break;case"speak":e.commandSpeak({args:o});break;case"ajax":e.commandAjax()}s(!0)})},commandAjax:function(){this.$router.replace({name:"ajax"})},commandGo:function(t){!t.args||t.args.length<1?this.autoReply({status:"normal",text:"请输入待跳转的路由名称："+this.allRoutePath.join("、")+"<br/>例如：go home"}):this.allRoutePath.indexOf(t.args[0])<0?this.autoReply({status:"warning",text:"路由 <b>"+t.args[0]+'</b> 不存在<br/><span style="color: #ccc;">请输入待跳转的路由名称：'+this.allRoutePath.join("、")+'</span><br/><span style="color: #ccc;">例如：go home</span>'}):this.$router.replace({name:t.args[0]})},commandHelp:function(){this.autoReply({status:"normal",text:"可用命令包括："+this.allCommands.join("、")})},commandReload:function(){this.$router.go(0)},commandAudio:function(t){if(!t.args||t.args.length<1)this.autoReply({status:"error",text:"请输入操作名，可用的操作名包括：play、stop、volume、set"});else switch(t.args.shift()){case"play":this.commandPlay({args:t.args});break;case"stop":case"pause":this.commandStop();break;case"restart":this.commandRestart();break;case"get":this.audioGetOp({args:t.args});break;case"set":this.audioSetOp({args:t.args});break;case"volume":this.audioGetVolume()}},commandSpeak:function(t){for(var e=0;e<t.args.length;e++)window.speechSynthesis.speak(new window.SpeechSynthesisUtterance(t.args[e]))},audioGetOp:function(t){if(!t.args||t.args.length<0)this.autoReply({status:"error",text:"请输入想获取的属性，如 volume"});else switch(t.args.shift()){case"volume":this.audioGetVolume()}},audioSetOp:function(t){if(!t.args||t.args.length<0)this.autoReply({status:"error",text:"请输入想设置的属性，如 volume"});else switch(t.args.shift()){case"volume":this.audioSetVolume(t.args.shift())}},audioGetVolume:function(){this.autoReply({status:"normal",text:"当前音量："+100*this.audio.el.volume})},audioSetVolume:function(t){this.audio.el.volume=(parseFloat(t)/100).toFixed(2)>1?1:(parseFloat(t)/100).toFixed(2),this.autoReply({status:"success",text:(t>100?"音量上限为100，":"")+"音量已经设置为："+Math.min(t,100)})},commandPlay:function(t){var e=this;!t.args||t.args.length<1?this.autoReply({status:"warning",text:"未指定音频资源"}):(this.audio.src=t.args[0],setTimeout(function(){e.audio.el.play(),e.autoReply({status:"success",text:"正在播放: "+t.args[0].substring(t.args[0].lastIndexOf("/")+1,t.args[0].lastIndexOf("."))})},1))},commandStop:function(){this.audio.el.pause(),this.autoReply({status:"success",text:"音乐已经暂停"})},commandRestart:function(){this.audio.el.play(),this.autoReply({status:"success",text:"继续播放: "+this.audio.src.substring(this.audio.src.lastIndexOf("/")+1,this.audio.src.lastIndexOf("."))})},clearConsole:function(){this.historyConsoles=[{type:"user",text:'<span style="color: '+this.consoleStyles.color.label+';">'+this.cmdPrefix+"</span> clear"}]},scrollToConsoleBottom:function(){setTimeout(function(){document.querySelector(".window_cmd_console").scrollTo(0,1e4)},10)}},watch:{shown:function(t){var e=this;t&&setTimeout(function(){e.$refs.cmdRef.focus()},100)}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"window_cmd_container"},[s("div",{staticClass:"window_cmd_inner",class:{show:t.shown},style:{pointerEvents:t.shown?"auto":"none"}},[s("div",{staticClass:"window_cmd_toggle_container"},[s("Tooltip",{attrs:{content:t.shown?"关闭操作框 cmd/ctrl + shift + R":"打开操作框 cmd/ctrl + shift + R",placement:"left"}},[s("div",{staticClass:"window_cmd_toggle",on:{click:t.toggleCmdContainer}},[s("Icon",{attrs:{type:"md-hammer",size:"20"}})],1)])],1),t._v(" "),s("div",{staticClass:"window_cmd_content"},[s("div",{staticClass:"window_cmd_console"},[t._l(t.historyConsoles,function(e,a){return s("div",{key:a,staticClass:"window_cmd_console_item",class:e.type},[s("div",{staticClass:"window_cmd_console_item_inner",domProps:{innerHTML:t._s(e.text)}})])}),t._v(" "),s("div",{staticClass:"blank_div",staticStyle:{height:"15px"}})],2),t._v(" "),s("div",{staticClass:"window_cmd_input"},[s("span",[t._v(t._s(t.cmdPrefix))]),t._v(" "),s("Input",{ref:"cmdRef",attrs:{type:"text",size:"large"},on:{"on-enter":t.sendCommand,"on-keyup":t.keyupHandler},model:{value:t.currentCommand,callback:function(e){t.currentCommand=e},expression:"currentCommand"}})],1)])]),t._v(" "),s("audio",{staticStyle:{width:"0",height:"0"},attrs:{id:"cmd_audio",src:t.audio.src}})])},staticRenderFns:[]};var u=s("VU/8")(m,d,!1,function(t){s("3EE6")},"data-v-62a5fcbe",null);e.default=u.exports}});
//# sourceMappingURL=17.9c84bff8e3710a6edff2.js.map