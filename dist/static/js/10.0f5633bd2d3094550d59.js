webpackJsonp([10],{1198:function(t,e){},vxD3:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Xxa5"),o=a.n(s),n=a("exGp"),i=a.n(n),l=a("//Fk"),c=a.n(l),r=a("mvHQ"),m=a.n(r),v=a("Du/2"),d=a("0xDb"),u={name:"settings",components:{Draggable:function(){return a.e(15).then(a.bind(null,"DAYN"))}},data:function(){return{toolTagsModal:{shown:!1,activeItems:[],inactiveItems:[]},themeImagesModal:{shown:!1},cacheActiveThemeIndex:[-1,-1],cacheBlankHomePage:""}},computed:{maxToolCount:function(){return this.$store.state.maxToolCount},tools:function(){return this.$store.state.tools},bodyStyles:function(){return this.$store.state.bodyStyles},settingsContainerStyles:function(){return{minHeight:this.bodyStyles.height-65+"px"}},settingsInnerStyles:function(){return{maxHeight:this.bodyStyles.height-65-30+"px"}},localStorageKeys:function(){return this.$store.state.localStorageKeys},activeTools:function(){return this.$store.state.activeTools},inactiveTools:function(){return this.$store.state.inactiveTools},themeImages:function(){return this.$store.state.themeImages},activeThemeIndex:function(){return this.$store.state.activeThemeIndex},blankHomePage:function(){return this.$store.state.blankHomePage}},created:function(){var t=this;this.$nextTick(function(){t.toolTagsModal.activeItems=JSON.parse(m()(t.activeTools));try{t.toolTagsModal.inactiveItems=JSON.parse(m()(t.inactiveTools))}catch(t){}t.cacheActiveThemeIndex=t.activeThemeIndex,t.cacheBlankHomePage=t.blankHomePage})},methods:{getActiveTools:function(){var t,e=this;return new c.a((t=i()(o.a.mark(function t(a){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.getItem(e.localStorageKeys.activeTools);case 2:s=t.sent,a(s||JSON.parse(m()(e.tools)));case 4:case"end":return t.stop()}},t,e)})),function(e){return t.apply(this,arguments)}))},getInactiveTools:function(){var t,e=this;return new c.a((t=i()(o.a.mark(function t(a){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.getItem(e.localStorageKeys.inactiveTools);case 2:s=t.sent,a(s||[]);case 4:case"end":return t.stop()}},t,e)})),function(e){return t.apply(this,arguments)}))},openToolTagsModal:function(){this.toolTagsModal.shown=!0},saveTools:function(){var t=this;return i()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit(v.w,{tools:t.toolTagsModal.activeItems}),t.$store.commit(v.D,{tools:t.toolTagsModal.inactiveTools}),e.next=4,d.a.setItem(t.localStorageKeys.activeTools,t.toolTagsModal.activeItems);case 4:return e.next=6,d.a.setItem(t.localStorageKeys.inactiveTools,t.toolTagsModal.inactiveItems);case 6:case"end":return e.stop()}},e,t)}))()},changeMaxToolCount:function(t){this.$store.commit(v.F,{count:Number(t.target.value)})},openThemeImagesModal:function(){this.themeImagesModal.shown=!0},chooseThemeImage:function(t){this.cacheActiveThemeIndex=[Number(t.target.dataset.index),Number(t.target.dataset.subIndex)]},saveTheme:function(){this.$store.commit(v.v,{activeThemeIndex:this.cacheActiveThemeIndex})},changeBlankHomePage:function(){this.$store.commit(v.z,{blankHomePage:this.cacheBlankHomePage})},clearAllStorage:function(){var t=this;this.$Modal.confirm({title:"清除缓存",content:"删除缓存后，用户所有设置会恢复为默认，确定删除所有缓存？",okText:"确认",cancelText:"取消",onOk:function(){var e=this;return i()(o.a.mark(function a(){var s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=o.a.keys(t.localStorageKeys);case 1:if((e.t1=e.t0()).done){e.next=8;break}if(s=e.t1.value,!t.localStorageKeys.hasOwnProperty(s)){e.next=6;break}return e.next=6,d.a.removeItem(t.localStorageKeys[s]);case 6:e.next=1;break;case 8:t.$Message.success("缓存已经清除");case 9:case"end":return e.stop()}},a,e)}))()}})}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"settings_container",style:t.settingsContainerStyles},[a("div",{staticClass:"settings_inner",style:t.settingsInnerStyles},[a("div",{staticClass:"settings_item"},[a("label",{staticClass:"settings_item_label"},[t._v("我的主页")]),t._v(" "),a("div",{staticClass:"settings_item_value"},[a("Input",{attrs:{type:"text"},on:{"on-change":t.changeBlankHomePage},model:{value:t.cacheBlankHomePage,callback:function(e){t.cacheBlankHomePage=e},expression:"cacheBlankHomePage"}})],1)]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"settings_item"},[a("label",{staticClass:"settings_item_label"},[t._v("最多显示几项工具")]),t._v(" "),a("div",{staticClass:"settings_item_value"},[a("Input",{attrs:{type:"text",value:t.maxToolCount},on:{"on-change":t.changeMaxToolCount}})],1)]),t._v(" "),a("div",{staticClass:"settings_item"},[a("label",{staticClass:"settings_item_label"},[t._v("工具")]),t._v(" "),a("div",{staticClass:"settings_item_value",on:{click:t.openToolTagsModal}},t._l(t.activeTools,function(e,s){return a("div",{key:s,staticClass:"router_item_tag",class:{fade:s>=t.maxToolCount}},[t._v(t._s(e.label))])}))]),t._v(" "),a("div",{staticClass:"settings_item"},[a("label",{staticClass:"settings_item_label"},[t._v("主题")]),t._v(" "),a("div",{staticClass:"settings_item_value h100"},[a("div",{staticClass:"bg_preview",on:{click:t.openThemeImagesModal}},[t.activeThemeIndex.join(";").indexOf("-1")<0?a("img",{attrs:{src:t.themeImages[t.activeThemeIndex[0]].sublist[t.activeThemeIndex[1]].img}}):t._e()])])]),t._v(" "),a("div",{staticClass:"settings_item"},[a("label",{staticClass:"settings_item_label"},[t._v("清除缓存")]),t._v(" "),a("div",{staticClass:"settings_item_value"},[a("Button",{attrs:{type:"warning"},on:{click:t.clearAllStorage}},[t._v("清除缓存")])],1)])]),t._v(" "),a("Modal",{attrs:{"mask-closable":!1,"ok-text":"保存",title:"订制您常用的工具"},on:{"on-ok":t.saveTools},model:{value:t.toolTagsModal.shown,callback:function(e){t.$set(t.toolTagsModal,"shown",e)},expression:"toolTagsModal.shown"}},[a("div",{staticClass:"tool_modal_container"},[a("div",{staticClass:"tool_modal_panel tool_modal_left_container active"},[a("div",{staticClass:"tool_modal_panel_title"},[t._v("使用中的工具")]),t._v(" "),a("div",{staticClass:"tool_modal_panel_content"},[a("draggable",{attrs:{options:{draggable:".item",group:"tools"}},model:{value:t.toolTagsModal.activeItems,callback:function(e){t.$set(t.toolTagsModal,"activeItems",e)},expression:"toolTagsModal.activeItems"}},t._l(t.toolTagsModal.activeItems,function(e,s){return a("div",{key:s,staticClass:"item draggable_item"},[a("Icon",{attrs:{type:"md-move",size:"16"}}),t._v("\n\t\t\t\t        \t\t"+t._s(e.label)+"\n\t\t\t\t        \t")],1)}))],1)]),t._v(" "),a("div",{staticClass:"tool_modal_panel tool_modal_right_container"},[a("div",{staticClass:"tool_modal_panel_title"},[t._v("未使用的工具")]),t._v(" "),a("div",{staticClass:"tool_modal_panel_content"},[a("draggable",{attrs:{options:{draggable:".item",group:"tools"}},model:{value:t.toolTagsModal.inactiveItems,callback:function(e){t.$set(t.toolTagsModal,"inactiveItems",e)},expression:"toolTagsModal.inactiveItems"}},t._l(t.toolTagsModal.inactiveItems,function(e,s){return a("div",{key:s,staticClass:"item draggable_item"},[a("Icon",{attrs:{type:"md-move",size:"16"}}),t._v("\n\t\t\t\t        \t\t"+t._s(e.label)+"\n\t\t\t\t        \t")],1)}))],1)])])]),t._v(" "),a("Modal",{attrs:{"mask-closable":!1,fullscreen:!0,"ok-text":"确定",title:"选择主题"},on:{"on-ok":t.saveTheme},model:{value:t.themeImagesModal.shown,callback:function(e){t.$set(t.themeImagesModal,"shown",e)},expression:"themeImagesModal.shown"}},[a("div",{staticClass:"themes_item_containner"},[a("div",{staticClass:"themes_item_label"},[t._v("不设置背景图")]),t._v(" "),a("div",{staticClass:"themes_item_content"},[a("div",{staticClass:"themes_item blank_theme",attrs:{"data-index":-1,"data-sub-index":-1},on:{click:t.chooseThemeImage}},[-1==t.cacheActiveThemeIndex[0]||-1==t.cacheActiveThemeIndex[1]?a("div",{staticClass:"themes_item_selected"},[a("Icon",{attrs:{type:"md-checkmark",size:"40"}})],1):t._e()])])]),t._v(" "),t._l(t.themeImages,function(e,s){return a("div",{key:s,staticClass:"themes_item_container"},[a("div",{staticClass:"themes_item_label"},[t._v(t._s(e.label))]),t._v(" "),a("div",{staticClass:"themes_item_content"},t._l(e.sublist,function(e,o){return a("div",{key:o,staticClass:"themes_item",attrs:{"data-index":s,"data-sub-index":o},on:{click:t.chooseThemeImage}},[a("img",{attrs:{src:e.img}}),t._v(" "),a("transition",{attrs:{name:"theme-item-transition","enter-active-class":"animated fast fadeIn","leave-active-class":"animated fast fadeOut"}},[t.cacheActiveThemeIndex[0]==s&&t.cacheActiveThemeIndex[1]==o?a("div",{staticClass:"themes_item_selected"},[a("Icon",{attrs:{type:"md-checkmark",size:"40"}})],1):t._e()])],1)}))])})],2)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"settings_tag_container"},[e("div",{staticClass:"settings_tag_bg"}),this._v(" "),e("div",{staticClass:"settings_tag_label"},[this._v("设置")])])}]};var g=a("VU/8")(u,_,!1,function(t){a("1198")},"data-v-44bfa286",null);e.default=g.exports}});
//# sourceMappingURL=10.0f5633bd2d3094550d59.js.map